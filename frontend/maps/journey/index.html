<!DOCTYPE html>
<html lang="en">
<head>
    <title>StockTech.org</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_2irFTnov23JpJtk2S-IcZ6fNKkPzrmI"></script>

    <meta property="og:title" content="StockTech.org">
    <meta property="og:image" content="https://stocktech.org/img/my.gif">
    <meta property="og:type" content="article" />
    <meta property="fb:app_id" content="1641916685886296" />
    <meta property="og:description" content="Multiple stock price charts." />
    <meta property="og:url" content="https://stocktech.org/">

    <link rel="stylesheet" href="./../lib/moment/moment.min.js" />
    <link rel="stylesheet" href="./../lib/data-tables/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="../css/mobile.table.css"/>
    <link rel="stylesheet" href="./../lib/bootstrap/css/bootstrap-icons.css">
    <link rel="stylesheet" href="./../lib/css/table-sections.css">


    <meta name="format-detection" content="telephone=no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="../services/vanilla.js"></script>

    <script src="./../lib/jquery/jquery.min.js" asp-append-version="true"></script>
    <script src="./../lib/vue/vue.js"></script>
    <link rel="stylesheet" href="./../lib/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/mobile.css" />

    <script type="module" src="./index.js"></script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM_Placeholder');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AnalyticsTagPlaceholder"></script>
    <script src="./../lib/moment/moment.min.js"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'AnalyticsTagPlaceholder');
    </script>

    <script src="./../lib/lightweight-charts/lightweight-charts.standalone.production.js" asp-append-version="true"></script>

    <style>
        [v-cloak] { display:none; }

        #progress-bar {
            width: 100%;
            height: 30px;
            background-color: #ccc;
        }
        .progress-bar-votes {
            margin: 3px;
            width: 100%;
            height: 30px;
            border: 1px solid #ccc;
        }

        #progress {
            width: 0%;
            height: 100%;
            background-color: green;
            transition: width 1s linear;
        }

        .progress-yellow {
            background-color: yellow;
            color: blue;
        }

        .progress-green {
            background-color: darkblue;
            color: white;
        }

        .progress-votes {
            width: 0%;
            height: 100%;
            /* background-color: darkgreen; */
            transition: width 1s linear;
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        .full-width{
            width: 100%;
        }
        .voting-selection{
            border: 1px solid gray;
            border-radius: 10px;
            padding: 5px;
        }

        .section-title{
            font-weight: bold;
            font-size: x-large;
        }
        .menu-item-preview{
            text-align: center;
            display: inline-block;
        }
        .section{
            font-weight: bold; 
            font-size: larger; 
            text-align: center; 
            padding: 5px; 
            border-radius: 5px; 
            border: 1px solid gray; 
            margin: 10px;
        }
        
        .map {
            width: 100%;
            max-height: 500px;
        }

        .location-sugestion{
            background-color: #f2fff8;
            border: 1px solid silver;
            border-radius: 1px;
            margin: 2px;
            padding: 5px;
            font-size: medium;
            font-weight: normal;
        }

        .btn.topic{
            width: 100px
        }

        .option{
            margin: 0px 5px;
        }
    </style>

    <!-- Page content -->

    <div id="adminApp">
        <div class="container" :style="'background-color: ' + backgroundColor">
            <!-- Voting Help Page START -->
            <div class="row" v-if="!user">
                <div class="col-12" style="min-width: 300px; text-align: center">
                    <h1>Connecting... <img class="size_40" src="../../img/loading.svg" alt="loading"/></h1>
                </div>
            </div>

            <div v-cloak v-if="connectionLost" class="alert-danger">Check your internet connection</div>
            <div class="row" v-cloak>
                <div class="col-12" style="min-width: 300px; text-align: center">
                    <otb-menu-component ref="appMenu"></otb-menu-component>
                </div>
            </div>
            
            <div class="row" v-cloak v-if="user">
                <div class="col-12" style="min-width: 300px; text-align: center">
                <h1>Menu</h1>
                <div v-if="!balanceExists"></div>
                <div v-else>
                    <div>Equity: {{lastEquityValue}}</div>
                    <div>Cash: {{cash}} (<span>{{lastPercentValue}}%</span>) </div> 
                    
                </div>
                </div>
            </div>
            

            <div class="inline-actions">
                <span class="inline-action" @click="listJourneys(null)">My Journeys</span>                
            </div>
            <br>
            <br>

            <div class="section">
                Set your journey
            </div>
         

        <div v-if="startDate" @click="showDateTimeControls = showDateTimeControls+1"
        style="color: rgb(82, 0, 82); font-weight: bold; font-size: larger; text-align: center; padding: 5px; border-radius: 5px; border: 1px solid gray; margin: 10px">
        on {{startDate}} at {{startTime}}
        <div style="color: gray; font-size: medium;">(<span class="timeAgo" :id="startDateTime">{{timeAgo}}</span>)</div>
        </div>

        <div v-if="showDateTimeControls % 3 == 1" id="showDateTimeControls" style="background-color: #fff1f1; padding: 2px; border-radius: 5px; border: solid gray; border-width: 1px 0px; ">
        
            <div class="row" @click.stop="">
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px; vertical-align: middle;" class="btn btn-primary" @click="timeFromNow(0)">Now</span>
                </div>
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px; vertical-align: middle;" class="btn btn-primary" @click="timeFromNow(5)">In 5 minutes</span>
                </div>
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px; vertical-align: middle;" class="btn btn-primary" @click="timeFromNow(15)">In 15 minutes</span>
                </div>
            </div>
            <div class="row" @click.stop="">
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px" class="btn btn-primary" @click="timeFromNow(30)">In 30 minutes</span>
                </div>
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px" class="btn btn-primary" @click="timeFromNow(45)">In 45 minutes</span>
                </div>
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px" class="btn btn-primary" @click="timeFromNow(1*60)">In 1 hour</span>
                </div>
            </div>
            <div class="row" @click.stop="">
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px" class="btn btn-primary" @click="timeFromNow(2*60)">In 2 hours</span>
                </div>
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px" class="btn btn-primary" @click="timeFromNow(3*60)">In 3 hours</span>
                </div>
                <div class="col-4 mt-2">
                    <span style="width: 95px; height: 65px" class="btn btn-primary" @click="timeFromNow(4*60)">In 4 hours</span>
                </div>
            </div>
            <br>
        <center><div class="btn btn-light" @click="showDateTimeControls = showDateTimeControls+1">More options...</div></center>
    </div>

        <div v-if="showDateTimeControls % 3 == 2" id="showDateTimeControls" style="background-color: #fff1f1; padding: 2px; border-radius: 5px; border: solid gray; border-width: 1px 0px; ">
          
            <div class="row" @click.stop="">
                <div class="col-4 mt-2">
                    <span class="btn w-100" :class="dateOption == 1 ? 'btn-primary':'btn-secondary'"
                    @click.self="setDateOption(1)">Now</span>
                </div>
                <div class="col-4 mt-2">
                    <span class="btn w-100" :class="dateOption == 2 ? 'btn-primary':'btn-secondary'"
                    @click.self="setDateOption(2)">Today</span>
                </div>
                <div class="col-4 mt-2">
                    <span class="btn w-100" :class="dateOption == 3 ? 'btn-primary':'btn-secondary'"
                    @click.self="setDateOption(3)">Set Date</span>
                </div>
            </div>
            
            <div class="row" v-if="dateOption > 2 && showDateTimeControls" @click.stop="">
            <div class="col-12">
                <br>
                Date: <input v-model="startDate" style="width: 120px">
                <span style="float: right">
                    <span class="btn" @click="showDays = !showDays" :class="showDays ? 'btn-primary':'btn-secondary'">Days</span>
                    <span class="btn" @click="showMonths = !showMonths" :class="showMonths ? 'btn-primary':'btn-secondary'">Months</span>
                </span>
            </div>
        </div>

        

        <div v-if="showDays">
            <span v-if="false">Will only change the day, not the month.<br></span>
            You can also type in another date. 

            <div class="row"  @click.stop="">
                
                <div class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(1)" :class="startHour == 8 ? 'btn-primary':'btn-secondary'">1</span></div>
                
                <div class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(2)" :class="startHour == 9 ? 'btn-primary':'btn-secondary'">2</span></div>
               
                <div class="col-2 mt-1"> <span style="width: 45px;" class="btn" @click="setStartDay(3)" :class="startHour == 10 ? 'btn-primary':'btn-secondary'">3</span></div>
               
                <div class="col-2 mt-1"> <span style="width: 45px;" class="btn" @click="setStartDay(4)" :class="startHour == 11 ? 'btn-primary':'btn-secondary'">4</span></div> 
                
                <div class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(5)" :class="startHour == 12 ? 'btn-primary':'btn-secondary'">5</span></div>
                
                <div class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(6)" :class="startHour == 13 ? 'btn-primary':'btn-secondary'">6</span></div>
            </div>
            <div class="row"  @click.stop="">
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(7)" :class="startHour == 14 ? 'btn-primary':'btn-secondary'">7</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(8)" :class="startHour == 15 ? 'btn-primary':'btn-secondary'">8</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(9)" :class="startHour == 16 ? 'btn-primary':'btn-secondary'">9</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(10)" :class="startHour == 17 ? 'btn-primary':'btn-secondary'">10</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(11)" :class="startHour == 18 ? 'btn-primary':'btn-secondary'">11</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(12)" :class="startHour == 19 ? 'btn-primary':'btn-secondary'">12</span></span>
              
            </div>
            <div class="row"  @click.stop="">
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(13)" :class="startHour == 14 ? 'btn-primary':'btn-secondary'">13</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(14)" :class="startHour == 15 ? 'btn-primary':'btn-secondary'">14</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(15)" :class="startHour == 16 ? 'btn-primary':'btn-secondary'">15</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(16)" :class="startHour == 17 ? 'btn-primary':'btn-secondary'">16</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(17)" :class="startHour == 18 ? 'btn-primary':'btn-secondary'">17</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(18)" :class="startHour == 19 ? 'btn-primary':'btn-secondary'">18</span></span>
              
            </div>
            <div class="row"  @click.stop="">
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(19)" :class="startHour == 14 ? 'btn-primary':'btn-secondary'">19</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(20)" :class="startHour == 15 ? 'btn-primary':'btn-secondary'">20</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(21)" :class="startHour == 16 ? 'btn-primary':'btn-secondary'">21</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(22)" :class="startHour == 17 ? 'btn-primary':'btn-secondary'">22</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(23)" :class="startHour == 18 ? 'btn-primary':'btn-secondary'">23</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(24)" :class="startHour == 19 ? 'btn-primary':'btn-secondary'">24</span></span>
              
            </div>
            <div class="row"  @click.stop="">
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(25)" :class="startHour == 14 ? 'btn-primary':'btn-secondary'">25</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(26)" :class="startHour == 15 ? 'btn-primary':'btn-secondary'">26</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(27)" :class="startHour == 16 ? 'btn-primary':'btn-secondary'">27</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(28)" :class="startHour == 17 ? 'btn-primary':'btn-secondary'">28</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(29)" :class="startHour == 18 ? 'btn-primary':'btn-secondary'">29</span></span>
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(30)" :class="startHour == 19 ? 'btn-primary':'btn-secondary'">30</span></span>
              
            </div>
            <div class="row" @click.stop="">
                
                <span class="col-2 mt-1"><span style="width: 45px;" class="btn" @click="setStartDay(31)" :class="startHour == 14 ? 'btn-primary':'btn-secondary'">31</span></span>
            
            </div>
        </div>

        
        <div v-if="showMonths">
            <span v-if="false">Will only change the month, not the day.<br></span>
            You can also type in another date. 
            
        <div class="row"  @click.stop="">
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(0)" :class="startMonth == ':00' ? 'btn-primary':'btn-secondary'">Jan</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(1)" :class="startMonth == ':05' ? 'btn-primary':'btn-secondary'">Feb</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMonth(2)" :class="startMonth == ':10' ? 'btn-primary':'btn-secondary'">Mar</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMonth(3)" :class="startMonth == ':15' ? 'btn-primary':'btn-secondary'">Apr</span></div> 
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(4)" :class="startMonth == ':20' ? 'btn-primary':'btn-secondary'">May</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(5)" :class="startMonth == ':25' ? 'btn-primary':'btn-secondary'">Jun</span></div>
            </div>
            <div class="row" @click.stop="">
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(6)" :class="startMonth == ':30' ? 'btn-primary':'btn-secondary'">Jul</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(7)" :class="startMonth == ':35' ? 'btn-primary':'btn-secondary'">Aug</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMonth(8)" :class="startMonth == ':40' ? 'btn-primary':'btn-secondary'">Sep</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMonth(9)" :class="startMonth == ':45' ? 'btn-primary':'btn-secondary'">Oct</span></div> 
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(10)" :class="startMonth == ':50' ? 'btn-primary':'btn-secondary'">Nov</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMonth(11)" :class="startMonth == ':55' ? 'btn-primary':'btn-secondary'">Dec</span></div>
            </div>
        </div>

        <div class="row" v-if="dateOption > 1 && showDateTimeControls" @click.stop="">
            <div class="col-12">
                <br>
                Time: <input v-model="startTime" style="width: 80px">
                <span style="float: right">
                    <span class="btn" @click="showHours = !showHours" :class="showHours ? 'btn-primary':'btn-secondary'">Hours</span>
                    <span class="btn" @click="showMinutes = !showMinutes" :class="showMinutes ? 'btn-primary':'btn-secondary'">Minutes</span>
                </span>
            </div>
        </div>

        <div v-if="showHours">
            <span v-if="false">Will only change the hour, not the minutes.<br></span>
            You can also type in another time. 

            <div class="row"  @click.stop="">
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartHour(8)" :class="startHour == 8 ? 'btn-primary':'btn-secondary'">8 AM</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartHour(9)" :class="startHour == 9 ? 'btn-primary':'btn-secondary'">9 AM</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartHour(10)" :class="startHour == 10 ? 'btn-primary':'btn-secondary'">10 AM</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartHour(11)" :class="startHour == 11 ? 'btn-primary':'btn-secondary'">11 AM</span></div> 
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartHour(12)" :class="startHour == 12 ? 'btn-primary':'btn-secondary'">12 AM</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartHour(13)" :class="startHour == 13 ? 'btn-primary':'btn-secondary'">13 PM</span></div>
            </div>
            <div class="row" v-if="showHours" @click.stop="">
                
                <span class="col-2 mt-1"><span class="btn" @click="setStartHour(14)" :class="startHour == 14 ? 'btn-primary':'btn-secondary'">14 PM</span></span>
                
                <span class="col-2 mt-1"><span class="btn" @click="setStartHour(15)" :class="startHour == 15 ? 'btn-primary':'btn-secondary'">15 PM</span></span>
                
                <span class="col-2 mt-1"><span class="btn" @click="setStartHour(16)" :class="startHour == 16 ? 'btn-primary':'btn-secondary'">16 PM</span></span>
                
                <span class="col-2 mt-1"><span class="btn" @click="setStartHour(17)" :class="startHour == 17 ? 'btn-primary':'btn-secondary'">17 PM</span></span>
                
                <span class="col-2 mt-1"><span class="btn" @click="setStartHour(18)" :class="startHour == 18 ? 'btn-primary':'btn-secondary'">18 PM</span></span>
                
                <span class="col-2 mt-1"><span class="btn" @click="setStartHour(19)" :class="startHour == 19 ? 'btn-primary':'btn-secondary'">19 PM</span></span>
              
            </div>
        </div>

        
        <div v-if="showMinutes">
            <span v-if="false">Will only change the minutes, not the hour.<br></span>
            You can also type in another time. 
            
        <div class="row"  @click.stop="">
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(0)" :class="startHour == ':00' ? 'btn-primary':'btn-secondary'">:00</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(5)" :class="startHour == ':05' ? 'btn-primary':'btn-secondary'">:05</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMinute(10)" :class="startHour == ':10' ? 'btn-primary':'btn-secondary'">:10</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMinute(15)" :class="startHour == ':15' ? 'btn-primary':'btn-secondary'">:15</span></div> 
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(20)" :class="startHour == ':20' ? 'btn-primary':'btn-secondary'">:20</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(25)" :class="startHour == ':25' ? 'btn-primary':'btn-secondary'">:25</span></div>
            </div>
            <div class="row" @click.stop="">
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(30)" :class="startHour == ':30' ? 'btn-primary':'btn-secondary'">:30</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(35)" :class="startHour == ':35' ? 'btn-primary':'btn-secondary'">:35</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMinute(40)" :class="startHour == ':40' ? 'btn-primary':'btn-secondary'">:40</span></div>
               
                <div class="col-2 mt-1"> <span class="btn" @click="setStartMinute(45)" :class="startHour == ':45' ? 'btn-primary':'btn-secondary'">:45</span></div> 
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(50)" :class="startHour == ':50' ? 'btn-primary':'btn-secondary'">:50</span></div>
                
                <div class="col-2 mt-1"><span class="btn" @click="setStartMinute(55)" :class="startHour == ':55' ? 'btn-primary':'btn-secondary'">:55</span></div>
            </div>
        </div>
        
        <br>
        <center><div class="btn btn-light" @click="showDateTimeControls = !showDateTimeControls">Ok, close time selector</div></center>
    </div>
<br>

<div class="section" @click="changeFromLocation = changeFromLocation+1">
    <div>From</div>
    <div v-if="fromLocation.place_id" style="color: gray; font-size: medium;"><span >{{fromLocation.description}}</span></div>
    <div v-else>{{fromLocation.description}}</div>
    <div v-if="changeFromLocation % 3 == 1" @click.stop="">
        <div>
            <div v-for="location in commonLocations" class="location-sugestion" @click.stop="setFromLocation(location)">{{location.description}}</div>
            <center><div class="btn btn-light" @click="changeFromLocation = changeFromLocation+1">Search for location</div></center>
        </div>
    </div>
    <div v-if="changeFromLocation % 3 == 2" @click.stop="">
        <input type="text" v-model="searchFromLocationQuery" @keyup="searchAutocomplete(searchFromLocationQuery, 1)" placeholder="Enter a location">
        <div>
            <div v-for="location in fromLocationSuggestions" class="location-sugestion" @click.stop="setFromLocation(location)">{{location.description}}</div>
        </div>
    </div>
    <div id="fromMap" class="map"></div>
</div>

<div class="section" @click="changeToLocation = changeToLocation+1">
    <div>To</div>
    <div v-if="toLocation.place_id" style="color: gray; font-size: medium;"><span >{{toLocation.description}}</span></div>
    <div v-else>{{toLocation.description}}</div>
    <div v-if="changeToLocation % 3 == 1" @click.stop="">
        <div>
            <div v-for="location in commonLocations" class="location-sugestion" @click.stop="setToLocation(location)">{{location.description}}</div>
            <center><div class="btn btn-light" @click="changeToLocation = changeToLocation+1">Search for location</div></center>
        </div>
    </div>
    <div id="toMap" class="map"></div>
    <div v-if="changeToLocation % 3 == 2" @click.stop="">
        <input type="text" v-model="searchDestinationQuery" @keyup="searchAutocomplete(searchDestinationQuery, 0)" placeholder="Enter a location">
        <div>
            <div v-for="location in toLocationSuggestions" class="location-sugestion" @click.stop="setToLocation(location)">{{location.description}}</div>
        </div>
    </div>
    <div id="toMap" class="map"></div>
</div>

<br>

<div class="section">
    Who can see your journey?
    
    <div style="font-weight: normal; font-size: medium; color: black; text-align: left;">
        <div><input class="option" type="checkbox" id="for_sameStartEnd"/><label for="for_sameStartEnd">People with same location and destination</label></div>
        <div><input class="option" type="checkbox" id="for_sameStart"/><label for="for_sameStart">People close to starting location</label></div>
        <div><input class="option" type="checkbox" id="for_sameEnd"/><label for="for_sameEnd">People close to destination</label></div>
        <div><input class="option" type="checkbox" id="for_everyone"/><label for="for_everyone">Everyone</label></div>
    </div>
</div>



<div class="section">
    Your favorite topics

    <div @click="showTopicControls = !showTopicControls" style="font-weight: normal; font-size: medium; color: black; ">
        <div style="text-align: center;" v-if="!topics.find(p=>p.selected)">My default topics</div>
        <span v-for="topic in topics.filter(p=>p.selected)" :style="showTopicControls ? 'background-color: antiquewhite;': 'background-color: white;'" style=" border-radius: 5px; padding: 3px 5px; margin: 2px;">{{topic.name}}</span>
    </div>
    <div v-if="showTopicControls">
    <div class="row"  @click.stop="">
                
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[0])" :class="topics[0].selected ? 'btn-primary':'btn-secondary'">Politics</span></div>
        
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[1])" :class="topics[1].selected ? 'btn-primary':'btn-secondary'">Business</span></div>
       
        <div class="col-4 mt-1"> <span class="btn topic" @click="switchTopic(topics[2])" :class="topics[2].selected ? 'btn-primary':'btn-secondary'">Sports</span></div>
       
    </div>
    <div class="row" @click.stop="">
        
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[3])" :class="topics[3].selected ? 'btn-primary':'btn-secondary'">Technology</span></div>
        
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[4])" :class="topics[4].selected ? 'btn-primary':'btn-secondary'">Social</span></div>
    
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[5])" :class="topics[5].selected ? 'btn-primary':'btn-secondary'">Medicine</span></div>
        
    </div>
    <div class="row" @click.stop="">

        <div class="col-4 mt-1"> <span class="btn topic" @click="switchTopic(topics[6])" :class="topics[6].selected ? 'btn-primary':'btn-secondary'">Housing</span></div>
       
        <div class="col-4 mt-1"> <span class="btn topic" @click="switchTopic(topics[7])" :class="topics[7].selected ? 'btn-primary':'btn-secondary'">Family</span></div> 
            
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[8])" :class="topics[8].selected ? 'btn-primary':'btn-secondary'">Pets</span></div>
        
    </div>
    <div class="row" @click.stop="">

        <div class="col-4 mt-1"> <span class="btn topic" @click="switchTopic(topics[9])" :class="topics[9].selected ? 'btn-primary':'btn-secondary'">Education</span></div> 
        
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[10])" :class="topics[10].selected ? 'btn-primary':'btn-secondary'">Law</span></div>
       
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[11])" :class="topics[11].selected ? 'btn-primary':'btn-secondary'">Cars</span></div>
    
    </div>
    <div class="row" @click.stop="">
       
        <div class="col-4 mt-1"> <span class="btn topic" @click="switchTopic(topics[12])" :class="topics[12].selected ? 'btn-primary':'btn-secondary'">Art</span></div> 
        
        <div class="col-4 mt-1"> <span class="btn topic" @click="switchTopic(topics[13])" :class="topics[13].selected ? 'btn-primary':'btn-secondary'">Economics</span></div> 
        
        <div class="col-4 mt-1"><span class="btn topic" @click="switchTopic(topics[14])" :class="topics[14].selected ? 'btn-primary':'btn-secondary'">Travel</span></div>
   
    </div>
    <div class="row" @click.stop="">
             
        <div class="col-4 mt-1"><span class="btn topic" @click="setStartMinute(topics[15])" :class="topics[15].selected ? 'btn-primary':'btn-secondary'">Media/TV</span></div>
             
        <div class="col-4 mt-1"><span class="btn topic" @click="setStartMinute(topics[16])" :class="topics[16].selected ? 'btn-primary':'btn-secondary'">Biology</span></div>
             
        <div class="col-4 mt-1"><span class="btn topic" @click="setStartMinute(topics[17])" :class="topics[17].selected ? 'btn-primary':'btn-secondary'">History</span></div>
    </div>
    <br>
    <center><div class="btn btn-light" @click="showTopicControls = !showTopicControls">Ok, close topics selector</div></center>
    
</div>

</div>

<div class="section" style="background-color: antiquewhite;" @click="saveJourney()">
    Save my journey
</div>

            <div class="row">

                <table class='compact-table' style="text-align: right">
            
                    <template v-for="(item, index) in menuItems" v-if="!item.features || (user && user.features && item.features.find(p=> user.features.indexOf(p) >= 0))">
                                      

                        <tr @click.stop="goTo_otb_fn(item)">
                            <td> 
                                <div class="start-top-column"></div> 
                            </td>
                            <td style="width: 50px;" rowspan="2"> 
                                <div class="mid-top-column full-2-height" >
                                    <img width="40" height="40" :src="'../img/icons/'+item.icon+'.png'" style="border: 1px solid gray; border-radius: 5px; padding: 5px; margin-right: 10px">
                                </div>
                            </td> 
                            <td> 
                                <div class="mid-top-column">
                                    <small>{{item.time}} </small>
                                </div>
                            </td> 
                            <td> 
                                <div class="mid-top-column" >
                                </div> 
                            </td>
                            <td> 
                                <div class="mid-top-column" style="text-align: left;">
                                </div> 
                            </td>
                            <td> 
                                <div class="end-top-column" style="color: green"></div>
                            </td>
                        </tr>


                        <template v-if="item.position">

                        <tr @click="selectitem_otb_fn(item)">
                            <td> 
                                <div class="start-mid-column"></div> 
                            </td>                                    
                            <td> 
                                <div class="mid-mid-column">{{item.title}}</div>
                            </td> 
                            <td> 
                                <div class="mid-mid-column" style="text-align: left;">
                                    {{item.title}}
                                </div> 
                            </td>
                            <td> 
                                <div class="mid-mid-column" style="text-align: left;">
                                </div> 
                            </td>
                            <td> 
                                <div class="mid-mid-column" >
                                    <span  v-if="item.price && item.closingPrice" :style="item.price.percent < 0 ? 'color: red' : 'color: green'">{{ item.price.percent ? parseInt(item.price.percent*100)/100.0: 0 }} %</span>
                                </div> 
                            </td>
                            <td> 
                                <div class="end-mid-column" style="color: green"></div>
                            </td>
                        </tr>

                            <tr @click="selectitem_otb_fn(item)">
                                <td> <div class="start-bottom-column"></div> </td>
                                    <td> 
                                        <div class="mid-bottom-column">
                                            <small>{{item.position.value}} $</small>
                                        </div> 
                                    </td>                                     
                                    <td> 
                                        <div class="mid-bottom-column">
                                            <small>{{item.position.volume}} shares</small>
                                        </div> 
                                    </td>                                     
                                    <td> 
                                        <div class="mid-bottom-column">
                                            <small></small>
                                        </div> 
                                    </td>                                     
                                    <td> 
                                        <div class="mid-bottom-column">
                                            <small>{{item.position.profit}} $</small>
                                        </div> 
                                    </td>
                                <td> <div class="end-bottom-column" style="color: red"></div> </td>
                            </tr>
                        </template>

                        <tr v-else @click="selectitem_otb_fn(item)">
                            <td> 
                                <div class="start-bottom-column"></div> 
                            </td>                                 
                            <td> 
                                <div class="mid-bottom-column" style="text-align: left; color: gray;">
                                    <span v-if="item.icon == 'connection'">
                                        You you are going to
                                        <span @click="goTo_otb_fn(item)" :title="item.link" class="inline-link">{{item.location}}</span> with 
                                        <span class="user-name" @click="goTo_otb_fn({link: profile})" :title="'profile'">{{item.name}}</span>
                                        and 2 others. 
                                    </span>
                                    <span v-if="item.icon == 'proximity'">
                                        Optimize your journey to <span @click="goTo_otb_fn(item)" :title="item.link" class="inline-link">{{item.location}}</span>
                                    </span>
                                    <span v-if="item.icon == 'journey'">
                                        <span class="user-name" @click="goTo_otb_fn({link: profile})" :title="'profile'">{{item.name}}</span> 
                                        and 5 others are going with your to <span @click="goTo_otb_fn(item)" :title="item.link" class="inline-link">{{item.location}}</span> 
                                    </span>
                                </div>
                            </td> 
                            <td> 
                                <div class="mid-bottom-column" >
                                </div> 
                            </td>
                            <td> 
                                <div class="mid-bottom-column" >
                                </div> 
                            </td>
                            <td> 
                                <div class="end-bottom-column" style="color: green"></div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="8">
                                <br>
                            </td>
                        </tr>
                    </template>
                </table>
            </div>


            <!-- END OF OBJECTS -->

            <br>
            <br>

            <!-- START OF DEBUG -->
            <div v-if="showDebugMessages" v-cloak v-on:click="isDebug = !isDebug"> . | .
                <div v-if="isDebug">
                    <div>{{env}}</div>
                    <div v-on:click="getAlerts_otb_fn()">{{backgroundColor}}</div>
                    <div>{{url}}</div>
                    <div v-for="message in debugMessages">{{message}}</div>
                </div>
                <div class="btn" onclick="userService.setUser_otb_fn({ userId: 1, token: 'Flo' }, 'Dev')">Set User</div>
            </div>
            <!-- END OF DEBUG -->

        </div>
        <!-- END OF CONTAINER -->
    </div>

    <script>
        // SET BACKGROUND
        document.urlParams = new URLSearchParams(window.location.search);
        var env = document.urlParams.get('env');
        if(env) {
            setBackground(env);
        }
    </script>
    <script>
        // getPageStatus
        function getPageStatus_otb_fn(params){
            return "{ pageStatus: 1 }";
        }
        window.getPageStatus_otb_fn = getPageStatus_otb_fn;
        
        var isLocalhost = window.location.host.indexOf("localhost") >= 0;
        var windowEnv = null;
        var windowUser = null;
        var windowitem = false && isLocalhost ? {itemId: 1, code: "CCL"} : null;
        function setUser(user, env){
            window.windowUser = user;
            window.windowEnv = env;
            return "{ userId: " + window.windowUser.userId+" }";
        }
        function setitem(item){
            window.windowitem = item;
            return "{ itemId: " + window.windowitem.itemId+" }";
        }

        $(document).ready(function() {
            if(isLocalhost) {
                // setitem({itemId: 10, code: "CCL", price: 10.5});
            }
        });
    </script>

    <script type = "module">

    </script>

    <!-- Page content -->
</head>
</html>
